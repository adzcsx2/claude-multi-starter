# 最小核心版本 - 文件删除清单

## ✅ 保留文件（核心功能）

### 主脚本
- `START_MULTI_TAB.py` - 多标签页启动器

### bin/ 目录（仅保留）
- `bin/send` - 实例间消息发送（Linux/Mac）
- `bin/send.cmd` - 实例间消息发送（Windows）

### lib/ 目录（核心库）
- `lib/multi_daemon_launcher.py` - 多实例启动逻辑
- `lib/multi_instance_layout.py` - 窗口布局管理
- `lib/claude_session_resolver.py` - 会话文件解析
- `lib/detect_wezterm.py` - WezTerm 检测
- `lib/terminal.py` - 终端操作
- `lib/compat.py` - 跨平台兼容
- `lib/cms_start_config.py` - 配置加载
- `lib/providers.py` - 提供商管理
- `lib/cli_output.py` - CLI 输出工具（send 依赖）

### 文档
- `README.md` - 主文档
- `SETUP.md` - 设置指南
- `LICENSE` - 许可证

### 配置
- `.cms_config/cms.config` - 实例配置文件（如存在）

---

## ❌ 可删除文件（非核心功能）

### 根目录脚本
```
fix-mapping.py           # 映射修复工具
send-tab.py              # 标签页发送（已集成到 send）
install.cmd              # 安装脚本
install.ps1              # PowerShell 安装脚本
```

### bin/ 目录（删除）
```
bin/ask                  # 异步任务（非核心）
bin/pend                 # 任务查询（非核心）
bin/ping                 # 健康检查（非核心）
bin/cms-completion-hook  # 命令补全（非核心）
bin/cms-mounted          # 挂载检测（非核心）
bin/sync-config          # 配置同步（非核心）
bin/start-claude         # 单实例启动（非核心）
bin/start-claude.cmd     # 单实例启动 Windows（非核心）
bin/python3              # Python 链接（非核心）
bin/__pycache__/         # Python 缓存
```

### lib/ 目录（删除）
```
lib/claude_comm.py           # Claude 通信协议（非核心）
lib/cleanup-daemons.ps1      # 清理脚本（非核心）
lib/cms_config.py            # WSL 配置（非核心）
lib/cms_protocol.py          # CMS 协议（非核心）
lib/completion_hook.py       # 补全钩子（非核心）
lib/env_utils.py             # 环境工具（非核心）
lib/i18n.py                  # 国际化（非核心）
lib/pane_registry.py         # 窗格注册表（非核心）
lib/process_lock.py          # 进程锁（非核心）
lib/project_id.py            # 项目ID（非核心）
lib/session_utils.py         # 会话工具（非核心）
lib/__pycache__/             # Python 缓存
```

### mcp/ 目录（完全删除）
```
mcp/                     # MCP 服务器（跨 AI 集成，非核心）
```

### 文档（删除）
```
README_cn.md             # 中文文档（已有 README.md）
README_USAGE.md          # 使用说明（已有 SETUP.md）
USER_GUIDE.md            # 详细指南（641行，精简版本不需要）
项目功能清单.md          # 本分析文档（完成后可删）
删除清单-最小核心版本.md  # 本清单（完成后可删）
```

### 资源目录（可选删除）
```
assets/                  # 资源文件（如仅包含文档图片可删）
```

---

## 🗑️ 删除命令（PowerShell）

### 方案1: 手动删除（推荐 - 更安全）
先备份项目，然后逐个检查删除

### 方案2: 批量删除脚本
```powershell
# 警告：执行前请先备份！
# 建议先运行 -WhatIf 查看将删除的文件

# 删除根目录文件
Remove-Item -Path "fix-mapping.py" -WhatIf
Remove-Item -Path "send-tab.py" -WhatIf
Remove-Item -Path "install.cmd" -WhatIf
Remove-Item -Path "install.ps1" -WhatIf
Remove-Item -Path "README_cn.md" -WhatIf
Remove-Item -Path "README_USAGE.md" -WhatIf
Remove-Item -Path "USER_GUIDE.md" -WhatIf

# 删除 bin/ 非核心文件
Remove-Item -Path "bin/ask" -WhatIf
Remove-Item -Path "bin/pend" -WhatIf
Remove-Item -Path "bin/ping" -WhatIf
Remove-Item -Path "bin/cms-completion-hook" -WhatIf
Remove-Item -Path "bin/cms-mounted" -WhatIf
Remove-Item -Path "bin/sync-config" -WhatIf
Remove-Item -Path "bin/start-claude" -WhatIf
Remove-Item -Path "bin/start-claude.cmd" -WhatIf
Remove-Item -Path "bin/python3" -WhatIf
Remove-Item -Path "bin/__pycache__" -Recurse -WhatIf

# 删除 lib/ 非核心文件
Remove-Item -Path "lib/claude_comm.py" -WhatIf
Remove-Item -Path "lib/cleanup-daemons.ps1" -WhatIf
Remove-Item -Path "lib/cms_config.py" -WhatIf
Remove-Item -Path "lib/cms_protocol.py" -WhatIf
Remove-Item -Path "lib/completion_hook.py" -WhatIf
Remove-Item -Path "lib/env_utils.py" -WhatIf
Remove-Item -Path "lib/i18n.py" -WhatIf
Remove-Item -Path "lib/pane_registry.py" -WhatIf
Remove-Item -Path "lib/process_lock.py" -WhatIf
Remove-Item -Path "lib/project_id.py" -WhatIf
Remove-Item -Path "lib/session_utils.py" -WhatIf
Remove-Item -Path "lib/__pycache__" -Recurse -WhatIf

# 删除整个 mcp 目录
Remove-Item -Path "mcp" -Recurse -Force -WhatIf

# 删除资源目录（如果只是文档图片）
# Remove-Item -Path "assets" -Recurse -Force -WhatIf

# 确认无误后，去掉所有 -WhatIf 参数再次执行
```

---

## 📊 精简效果

### 删除前
- **文件数量**: ~40+ 文件
- **主要模块**: 8个功能模块

### 删除后  
- **文件数量**: ~15 核心文件
- **主要模块**: 3个核心模块
  - 多实例启动
  - 窗口布局
  - 实例通信（send）

### 保留的核心功能
✅ 多实例配置和启动  
✅ WezTerm 标签页布局  
✅ 实例间 send 消息  
✅ 会话隔离  
✅ 基本文档  

### 移除的功能
❌ 异步任务（ask/pend/ping）  
❌ MCP 跨 AI 集成  
❌ 命令补全  
❌ WSL 后端支持  
❌ 详细指南文档  
❌ 国际化  

---

## ⚠️ 注意事项

1. **删除前务必备份整个项目目录**
2. 建议使用 `-WhatIf` 参数先预览
3. 如果某些功能依赖了列表中的"非核心"文件，可能需要调整
4. `.cms_config/` 目录下的所有文件都保留
5. 删除后测试基本功能是否正常

---

## 🚀 删除后的使用方式

### 1. 配置实例
编辑 `.cms_config/cms.config`

### 2. 启动
```powershell
python START_MULTI_TAB.py
```

### 3. 通信
```powershell
bin/send ui "设计任务"
bin/send coder "开发任务"
```

简单高效！✨
